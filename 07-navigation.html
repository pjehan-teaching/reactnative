<section id="navigation">

    <section>
        <h2>Navigation</h2>
    </section>

    <section>
        <h3>Solutions</h3>
        <ul>
            <li>React Navigation : Simple à mettre en place</li>
            <li>React Native Navigation : Utilise les composants natifs</li>
            <li>React Router : Fonctionne également sur ReactJS</li>
        </ul>
    </section>

    <section>
        <h3>React Navigation : Limitations</h3>
        <ul>
            <li>Ne supporte pas l'ensemble des fonctionnalités de certains appareils (split-views, peek & pop...). Dans ce cas, il est préférable d'utiliser <a href="https://wix.github.io/react-native-navigation" target="_blank">React Native Navigation</a>.</li>
            <li>Problèmes de performances en comparaison avec une application native</li>
            <li>Problèmes avec les textes RTL</li>
        </ul>
        <footer>
            <a href="https://reactnavigation.org/docs/en/limitations.html" class="info" target="_blank">Limitations</a>
        </footer>
    </section>

    <section>
        <h3>Installation</h3>
        <p><a href="https://reactnavigation.org" target="_blank">React Navigation</a> est un composant permettant de gérer la navigation dans un application React Native.</p>
        <pre><code class="language-shell">npm install @react-navigation/native</code></pre>
        <pre><code class="language-shell">expo install react-native-gesture-handler react-native-reanimated react-native-screens react-native-safe-area-context @react-native-community/masked-view</code></pre>
    </section>

    <section>
        <h3>Types de navigations</h3>
        <div class="container">
            <div class="col">
                <ul>
                    <li><strong>Switch</strong> : Permet de passer de façon basique d'un écran à l'autre</li>
                    <li><strong>Stack</strong> : Les écrans s'empilent les uns sur les autres</li>
                    <li><strong>Tab</strong> : Affichage d'une navigation avec onglets</li>
                    <li><strong>Drawer</strong> : Affichage d'une navigation de type menu</li>
                </ul>
            </div>
            <div class="col">
                <img src="/assets/images/navigation.gif" alt="Navigation">
            </div>
        </div>
    </section>

    <section>
        <h3>Conteneur</h3>
        <p>Pour commencer, nous allons utiliser le composant <code class="language-js">NavigationContainer</code>.</p>
        <p>Ce composant sera en charge de gérer l'architecture de notre navigation et son state.</p>
        <p>En règle générale, ce composant doit être positionné à la racine de l'application dans le fichier App.js :</p>
        <pre><code class="language-jsx">function App() {
  return (
    &lt;NavigationContainer&gt;

    &lt;/NavigationContainer&gt;
  );
}</code></pre>
        <footer>
            <a href="https://reactnavigation.org/docs/app-containers/" class="info" target="_blank">App Container</a>
        </footer>
    </section>

    <section>
        <h3>Tab Navigator</h3>
        <img src="assets/images/tab-navigator.gif" alt="Tab Navigator">
    </section>

    <section>
        <h3>Tab Navigator</h3>
        <pre><code class="language-shell">npm install @react-navigation/bottom-tabs</code></pre>
        <p>Nous allons commencer par créer 2 écrans (composants React) que nous allons positionner dans le dossier "screens".</p>
        <p>Nous allons ensuite ajouter le code suivant dans le fichier App.js :</p>
        <pre><code class="language-jsx">import { createBottomTabNavigator } from '@react-navigation/bottom-tabs';
import HomeScreen from './screens/HomeScreen';
import SettingsScreen from './screens/SettingsScreen';

const Tab = createBottomTabNavigator();

return (
    &lt;NavigationContainer&gt;
        &lt;Tab.Navigator&gt;
            &lt;Tab.Screen name="Home" component={HomeScreen} /&gt;
            &lt;Tab.Screen name="Settings" component={SettingsScreen} /&gt;
        &lt;/Tab.Navigator&gt;
    &lt;/NavigationContainer&gt;
);
</code></pre>
        <footer>
            <a href="https://reactnavigation.org/docs/tab-based-navigation" class="info" target="_blank">Tab Navigation</a>
        </footer>
    </section>

    <section>
        <h3>Switch Navigator</h3>
        <img src="assets/images/switch-navigator.gif" alt="Switch Navigator">
    </section>

    <section>
        <h3>Switch Navigator</h3>
        <pre><code class="language-shell">npm install @react-navigation/stack</code></pre>
        <ul>
            <li>Affiche un écran à la fois</li>
            <li>Le state des écrans inactifs est réinitialisé</li>
            <li>Il n'est pas possible de revenir en arrière (pas d'historique)</li>
        </ul>
        <footer>
            <a href="https://reactnavigation.org/docs/auth-flow/" class="info" target="_blank">Utilisé typiquement pour le système d'authentification</a>
        </footer>
    </section>

    <section>
        <h3>Switch Navigator</h3>
        <pre><code class="language-jsx">import { createStackNavigator } from '@react-navigation/stack';

const Stack = createStackNavigator();

return (
    &lt;NavigationContainer&gt;
      &lt;Stack.Navigator&gt;
        &lt;Stack.Screen name="Home" component={HomeScreen} /&gt;
        &lt;Stack.Screen name="Settings" component={SettingsScreen} /&gt;
      &lt;/Stack.Navigator&gt;
    &lt;/NavigationContainer&gt;
  );</code></pre>
    </section>

    <section>
        <h3>Stack Navigator</h3>
        <img src="assets/images/stack-navigator.gif" alt="Stack Navigator">
    </section>

    <section>
        <h3>Stack Navigator</h3>
        <pre><code class="language-shell">npm install react-navigation-stack</code></pre>
        <ul>
            <li>Affiche un écran à la fois</li>
            <li>Le state des écrans inactifs est maintenu et ils restent montés</li>
            <li>
                Layout, animations et mouvements spécifiques aux plateformes
                <ul>
                    <li>Les écrans sont empilés les uns sur les autres</li>
                    <li>iOS : Les écrans slident du bas vers le haut et peuvent être fermés avec swipe vers la droite ou la gauche</li>
                    <li>Android : Les écrans apparaissent en fondu et il est possible de naviguer avec le bouton de retour</li>
                </ul>
            </li>
            <li>Les utilisateurs peuvent ajouter ou retirer des éléments de la pile, remplacer l'élément en cours...</li>
        </ul>
        <footer>
            <a href="https://reactnavigation.org/docs/navigating/#going-back" class="info" target="_blank">Stack permet de gérer un historique et d'utiliser la fonction back()</a>
        </footer>
    </section>

    <section>
        <h3>Créer des liens entre les écrans</h3>
        <p>Il est également possible de créer des liens entre nos écrans en utilisant les props disponibles sur les composants "screen" :</p>
        <pre><code class="language-js">this.props.navigation.navigate('ProfileTab')</code></pre>
    </section>

    <section>
        <h3>Paramètres dans les routes</h3>
        <p>React Navigation permet aussi de passer des paramètres dans les routes :</p>
        <pre><code class="language-js">this.props.navigation.navigate('ProfileTab', { username: 'John Doe' })</code></pre>
        <p>Puis de les récupérer de la façon suivante :</p>
        <pre><code class="language-js">this.props.route.params.username</code></pre>
    </section>

    <section>
        <h3>Personnaliser le header</h3>
        <p>Il est possible de personnaliser le header de l'application en ajoutant une propriété statique <code class="language-js">screenOptions</code> :</p>
        <pre><code class="language-jsx">&lt;Stack.Navigator
    screenOptions={{
        headerStyle: { backgroundColor: '#f4511e' },
        headerTintColor: '#fff',
        headerTitleStyle: { fontWeight: 'bold' }
    }}
&gt;</code></pre>
        <footer>
            <a href="https://reactnavigation.org/docs/headers" class="info" target="_blank">Personnaliser le header</a>
        </footer>
    </section>

</section>
